{% extends 'base.html' %}
{% block content %}

<h2>{{ lesson.title }}</h2>

<div class="card mt-3">
    <div class="card-body">

        {% if lesson.content_type == 'PDF' %}
            {% if lesson.pdf_file %}
                <iframe src="{{ lesson.pdf_file.url }}"
                        width="100%" height="500"
                        style="border:none;"></iframe>
            {% endif %}
        {% elif lesson.content_type == 'VIDEO' %}
            {% if lesson.video_file %}
                <video width="100%" controls>
                    <source src="{{ lesson.video_file.url }}">
                </video>
            {% endif %}
        {% endif %}

    </div>
</div>

<hr>

<!-- =========================
     LESSON COMPLETION
========================= -->
{% if not progress.completed %}
<form method="post" action="{% url 'complete_lesson' lesson.id %}">
    {% csrf_token %}
    <button class="btn btn-success">
        âœ… Mark Lesson as Completed
    </button>
</form>
{% else %}
<div class="alert alert-success mt-3">
    ğŸ‰ Lesson completed
</div>
{% endif %}

<!-- =========================
     QUIZ SECTION
========================= -->
{% if lesson.quiz %}
    <div class="mt-4">
        <a href="{% url 'take_quiz' lesson.quiz.id %}"
           class="btn btn-primary">
            ğŸ“ Take Quiz
        </a>
    </div>
{% endif %}

<a href="{% url 'course_detail' lesson.course.id %}"
   class="btn btn-secondary mt-4">
    â¬… Back to Course
</a>

{% endblock %}
